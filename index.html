<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—É–¥–∞-–°—é–¥–∞ - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: white;
            text-align: center;
        }
        
        body.light-theme {
            background: linear-gradient(135deg, #f0f2f5 0%, #e4e6e9 100%);
            color: #333;
        }
        
        .header-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .theme-toggle, .language-toggle {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(152, 108, 255, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .light-theme .theme-toggle,
        .light-theme .language-toggle {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #333;
        }
        
        .theme-toggle:hover, .language-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(152, 108, 255, 0.3);
        }
        
        .welcome-content {
            max-width: 600px;
            width: 100%;
            animation: fadeIn 0.8s ease-out;
        }
        
        .warning-icon {
            width: 120px;
            height: 120px;
            margin-bottom: 30px;
            animation: pulse 2s infinite;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        }
        
        .light-theme .warning-icon {
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
        }
        
        .welcome-title {
            font-size: 2.8rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #986CFF;
            text-shadow: 0 2px 10px rgba(152, 108, 255, 0.5);
        }
        
        .light-theme .welcome-title {
            color: #6D51AB;
            text-shadow: 0 2px 5px rgba(109, 81, 171, 0.3);
        }
        
        .tagline {
            font-size: 1.2rem;
            margin-bottom: 40px;
            opacity: 0.9;
            line-height: 1.6;
        }
        
        .light-theme .tagline {
            opacity: 0.8;
        }
        
        .warnings-list {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            text-align: left;
            border: 1px solid rgba(152, 108, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .light-theme .warnings-list {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(109, 81, 171, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .warning-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .light-theme .warning-item {
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .warning-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .warning-number {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: black;
            font-weight: bold;
            padding: 6px 12px;
            border-radius: 50%;
            margin-right: 20px;
            min-width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }
        
        .warning-text {
            flex: 1;
            font-size: 1rem;
            line-height: 1.6;
        }
        
        .warning-text strong {
            color: #f59e0b;
        }
        
        .light-theme .warning-text strong {
            color: #d97706;
        }
        
        .agreement-section {
            background: rgba(152, 108, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            border: 1px solid rgba(152, 108, 255, 0.3);
        }
        
        .light-theme .agreement-section {
            background: rgba(109, 81, 171, 0.1);
            border: 1px solid rgba(109, 81, 171, 0.3);
        }
        
        .agreement-checkbox {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .checkbox {
            width: 22px;
            height: 22px;
            cursor: pointer;
            accent-color: #986CFF;
        }
        
        .checkbox-label {
            font-size: 1rem;
            opacity: 0.9;
            text-align: left;
            flex: 1;
        }
        
        .light-theme .checkbox-label {
            opacity: 0.8;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞–ø—á–∏ */
        .captcha-container {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            border: 1px solid rgba(152, 108, 255, 0.2);
        }
        
        .light-theme .captcha-container {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(109, 81, 171, 0.2);
        }
        
        .captcha-code {
            font-size: 2.5rem;
            font-weight: bold;
            letter-spacing: 5px;
            margin: 20px 0;
            padding: 15px;
            background: linear-gradient(135deg, rgba(152, 108, 255, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-radius: 10px;
            user-select: none;
            font-family: 'Courier New', monospace;
            color: #f59e0b;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .light-theme .captcha-code {
            background: linear-gradient(135deg, rgba(152, 108, 255, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%);
            color: #d97706;
        }
        
        .captcha-input {
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
            border: 2px solid rgba(152, 108, 255, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-align: center;
            margin-top: 10px;
        }
        
        .light-theme .captcha-input {
            background: white;
            color: #333;
            border: 2px solid rgba(109, 81, 171, 0.3);
        }
        
        .captcha-controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .captcha-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .refresh-btn {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
        }
        
        .light-theme .refresh-btn {
            background: rgba(59, 130, 246, 0.1);
        }
        
        .audio-btn {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }
        
        .light-theme .audio-btn {
            background: rgba(16, 185, 129, 0.1);
        }
        
        .captcha-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .captcha-error {
            color: #ef4444;
            margin-top: 10px;
            font-size: 0.9rem;
            min-height: 20px;
        }
        
        .start-button {
            background: linear-gradient(135deg, #986CFF 0%, #6D51AB 100%);
            color: white;
            border: none;
            padding: 20px 50px;
            font-size: 1.3rem;
            font-weight: bold;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(152, 108, 255, 0.4);
            width: 100%;
            max-width: 300px;
        }
        
        .light-theme .start-button {
            box-shadow: 0 8px 25px rgba(109, 81, 171, 0.3);
        }
        
        .start-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(152, 108, 255, 0.6);
        }
        
        .light-theme .start-button:hover {
            box-shadow: 0 12px 30px rgba(109, 81, 171, 0.4);
        }
        
        .start-button:active {
            transform: translateY(1px);
        }
        
        .start-button:disabled {
            background: linear-gradient(135deg, #666 0%, #444 100%);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            opacity: 0.6;
        }
        
        .light-theme .start-button:disabled {
            background: linear-gradient(135deg, #ccc 0%, #aaa 100%);
        }
        
        .footer-note {
            margin-top: 30px;
            font-size: 0.9rem;
            opacity: 0.7;
            line-height: 1.5;
        }
        
        .light-theme .footer-note {
            opacity: 0.6;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.08); }
            100% { transform: scale(1); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .shake {
            animation: shake 0.3s;
            border-color: #ef4444 !important;
        }
    </style>
</head>
<body>
    <div class="header-controls">
        <button class="theme-toggle" id="themeToggle">
            <span>üåô</span> –¢–µ–º–∞
        </button>
        <button class="language-toggle" id="languageToggle">
            <span>üåê</span> –†—É—Å—Å–∫–∏–π
        </button>
    </div>
    
    <div class="welcome-content">
        <img src="place.png" alt="–ú–µ—Å—Ç–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è" class="warning-icon">
        
        <h1 class="welcome-title" data-lang="ru">–¢—É–¥–∞-–°—é–¥–∞</h1>
        <h1 class="welcome-title" data-lang="en" style="display: none;">Back and Forth</h1>
        
        <p class="tagline" data-lang="ru">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–µ–π –∏ –ª—é–±–∏—Ç–µ–ª–µ–π –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π</p>
        <p class="tagline" data-lang="en" style="display: none;">App for explorers and adventure lovers</p>
        
        <div class="warnings-list">
            <div class="warning-item">
                <div class="warning-number">1</div>
                <div class="warning-text">
                    <strong data-lang="ru">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ!</strong>
                    <span data-lang="ru">–í—Å–µ–≥–¥–∞ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–∫—Ä—É–∂–∞—é—â–µ–π –æ–±—Å—Ç–∞–Ω–æ–≤–∫–æ–π, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –ø–æ –Ω–µ–∑–Ω–∞–∫–æ–º—ã–º –º–∞—Ä—à—Ä—É—Ç–∞–º.</span>
                    <strong data-lang="en" style="display: none;">Safety first!</strong>
                    <span data-lang="en" style="display: none;">Always watch your surroundings, especially when moving along unfamiliar routes.</span>
                </div>
            </div>
            
            <div class="warning-item">
                <div class="warning-number">2</div>
                <div class="warning-text">
                    <strong data-lang="ru">–ù–µ –Ω–∞—Ä—É—à–∞–π—Ç–µ –∑–∞–∫–æ–Ω.</strong>
                    <span data-lang="ru">–ù–µ –∑–∞—Ö–æ–¥–∏—Ç–µ –Ω–∞ —á–∞—Å—Ç–Ω—ã–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏, –∑–∞–ø–æ–≤–µ–¥–Ω—ã–µ –∑–æ–Ω—ã –∏ –¥—Ä—É–≥–∏–µ –æ—Ö—Ä–∞–Ω—è–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã.</span>
                    <strong data-lang="en" style="display: none;">Don't break the law.</strong>
                    <span data-lang="en" style="display: none;">Do not enter private properties, protected areas and other guarded objects.</span>
                </div>
            </div>
            
            <div class="warning-item">
                <div class="warning-number">3</div>
                <div class="warning-text">
                    <strong data-lang="ru">–ë–µ—Ä–µ–≥–∏—Ç–µ –ø—Ä–∏—Ä–æ–¥—É.</strong>
                    <span data-lang="ru">–ù–µ –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –º—É—Å–æ—Ä, –Ω–µ –ø–æ–≤—Ä–µ–∂–¥–∞–π—Ç–µ —Ä–∞—Å—Ç–µ–Ω–∏—è –∏ –Ω–µ –±–µ—Å–ø–æ–∫–æ–π—Ç–µ –∂–∏–≤–æ—Ç–Ω—ã—Ö.</span>
                    <strong data-lang="en" style="display: none;">Take care of nature.</strong>
                    <span data-lang="en" style="display: none;">Do not leave trash, do not damage plants and do not disturb animals.</span>
                </div>
            </div>
            
            <div class="warning-item">
                <div class="warning-number">4</div>
                <div class="warning-text">
                    <strong data-lang="ru">–°–æ–æ–±—â–∏—Ç–µ –æ –ø–ª–∞–Ω–∞—Ö.</strong>
                    <span data-lang="ru">–ï—Å–ª–∏ –≤—ã –µ—â–µ —Ä–µ–±—ë–Ω–æ–∫, —Ç–æ —Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ –∫–æ–º—É-—Ç–æ –æ –≤–∞—à–µ–º –º–∞—Ä—à—Ä—É—Ç–µ –∏ –ø–ª–∞–Ω–∏—Ä—É–µ–º–æ–º –≤—Ä–µ–º–µ–Ω–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è.</span>
                    <strong data-lang="en" style="display: none;">Share your plans.</strong>
                    <span data-lang="en" style="display: none;">If you a kid, Tell someone about your route and estimated return time.</span>
                </div>
            </div>
            
            <div class="warning-item">
                <div class="warning-number">5</div>
                <div class="warning-text">
                    <strong data-lang="ru">–í–æ–∑—å–º–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ.</strong>
                    <span data-lang="ru">–í–æ–¥–∞, –∑–∞—Ä—è–∂–µ–Ω–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω, –∫–∞—Ä—Ç–∞ –∏ –∞–ø—Ç–µ—á–∫–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å –≤–∞–º–∏.</span>
                    <strong data-lang="en" style="display: none;">Take essentials.</strong>
                    <span data-lang="en" style="display: none;">Water, charged phone, map and first aid kit should be with you.</span>
                </div>
            </div>
        </div>
        
        <!-- –ö–∞–ø—á–∞ -->
        <div class="captcha-container">
            <h3 data-lang="ru">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ –≤—ã –Ω–µ —Ä–æ–±–æ—Ç:</h3>
            <h3 data-lang="en" style="display: none;">Confirm you're not a robot:</h3>
            
            <div class="captcha-code" id="captchaCode">ABCD</div>
            
            <input type="text" 
                   id="captchaInput" 
                   class="captcha-input" 
                   placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∏"
                   data-lang-ru="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∏"
                   data-lang-en="Enter the code from the image">
            
            <div class="captcha-error" id="captchaError"></div>
            
            <div class="captcha-controls">
                <button class="captcha-btn refresh-btn" id="refreshCaptcha">
                    <span data-lang="ru">–û–±–Ω–æ–≤–∏—Ç—å</span>
                    <span data-lang="en" style="display: none;">Refresh</span>
                </button>
                <button class="captcha-btn audio-btn" id="audioCaptcha">
                    <span data-lang="ru">–û–∑–≤—É—á–∏—Ç—å</span>
                    <span data-lang="en" style="display: none;">Audio</span>
                </button>
            </div>
        </div>
        
        <div class="agreement-section">
            <div class="agreement-checkbox">
                <input type="checkbox" id="agreeCheckbox" class="checkbox">
                <label for="agreeCheckbox" class="checkbox-label">
                    <span data-lang="ru">–Ø –ø—Ä–æ—á–∏—Ç–∞–ª(–∞) –∏ –ø–æ–Ω–∏–º–∞—é –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ü—Ä–∏–Ω–∏–º–∞—é –ø–æ–ª–Ω—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ —Å–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è.</span>
                    <span data-lang="en" style="display: none;">I have read and understand the safety rules. I accept full responsibility for my actions.</span>
                </label>
            </div>
            
            <button id="startButton" class="start-button" disabled>
                <span data-lang="ru">–ù–∞—á–∞—Ç—å –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ</span>
                <span data-lang="en" style="display: none;">Start Adventure</span>
            </button>
        </div>
        
        <p class="footer-note">
            <span data-lang="ru">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ —Ç–æ—á–∫–∏ –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è. <br>–í—Å–µ —Ä–µ—à–µ–Ω–∏—è –æ –º–∞—Ä—à—Ä—É—Ç–∞—Ö –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.</span>
            <span data-lang="en" style="display: none;">The app generates random points for exploration. <br>All route decisions are made by the user independently.</span>
        </p>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const CONFIG = {
            languages: ['ru', 'en'],
            defaultLanguage: 'ru',
            captchaLength: 6,
            showAlways: true // –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞
        };
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const state = {
            currentLanguage: CONFIG.defaultLanguage,
            currentTheme: 'dark',
            captchaCode: '',
            captchaVerified: false,
            agreementAccepted: false
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ localStorage
            loadSettings();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            initThemeToggle();
            initLanguageToggle();
            initCaptcha();
            initAgreementCheckbox();
            initStartButton();
            
            // –£–±–∏—Ä–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ main.html
            // –°—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –≤—Å–µ–≥–¥–∞
        });
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        function loadSettings() {
            const savedLanguage = localStorage.getItem('appLanguage');
            const savedTheme = localStorage.getItem('appTheme');
            
            if (savedLanguage && CONFIG.languages.includes(savedLanguage)) {
                state.currentLanguage = savedLanguage;
            }
            
            if (savedTheme === 'light') {
                state.currentTheme = 'light';
                document.body.classList.add('light-theme');
                document.getElementById('themeToggle').innerHTML = '<span>‚òÄÔ∏è</span> –¢–µ–º–∞';
            }
            
            updateLanguageDisplay();
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
        function initThemeToggle() {
            const themeToggle = document.getElementById('themeToggle');
            themeToggle.addEventListener('click', function() {
                if (state.currentTheme === 'dark') {
                    state.currentTheme = 'light';
                    document.body.classList.add('light-theme');
                    themeToggle.innerHTML = '<span>‚òÄÔ∏è</span> ' + 
                        (state.currentLanguage === 'ru' ? '–¢–µ–º–∞' : 'Theme');
                    localStorage.setItem('appTheme', 'light');
                } else {
                    state.currentTheme = 'dark';
                    document.body.classList.remove('light-theme');
                    themeToggle.innerHTML = '<span>üåô</span> ' + 
                        (state.currentLanguage === 'ru' ? '–¢–µ–º–∞' : 'Theme');
                    localStorage.setItem('appTheme', 'dark');
                }
            });
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–∞
        function initLanguageToggle() {
            const languageToggle = document.getElementById('languageToggle');
            updateLanguageButton();
            
            languageToggle.addEventListener('click', function() {
                const currentIndex = CONFIG.languages.indexOf(state.currentLanguage);
                const nextIndex = (currentIndex + 1) % CONFIG.languages.length;
                state.currentLanguage = CONFIG.languages[nextIndex];
                
                localStorage.setItem('appLanguage', state.currentLanguage);
                updateLanguageDisplay();
                updateLanguageButton();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–ø—á—É –ø—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞
                generateCaptcha();
            });
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —è–∑—ã–∫–∞
        function updateLanguageDisplay() {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            document.querySelectorAll('[data-lang]').forEach(element => {
                element.style.display = 'none';
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Å —Ç–µ–∫—É—â–∏–º —è–∑—ã–∫–æ–º
            document.querySelectorAll(`[data-lang="${state.currentLanguage}"]`).forEach(element => {
                element.style.display = element.tagName === 'SPAN' ? 'inline' : 'block';
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º placeholder –∫–∞–ø—á–∏
            const captchaInput = document.getElementById('captchaInput');
            if (captchaInput) {
                captchaInput.placeholder = captchaInput.getAttribute(`data-lang-${state.currentLanguage}`);
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ —è–∑—ã–∫–∞
        function updateLanguageButton() {
            const languageToggle = document.getElementById('languageToggle');
            const languageNames = {
                'ru': '–†—É—Å—Å–∫–∏–π',
                'en': 'English'
            };
            const icons = {
                'ru': 'üá∑üá∫',
                'en': 'üá∫üá∏'
            };
            languageToggle.innerHTML = `<span>${icons[state.currentLanguage]}</span> ${languageNames[state.currentLanguage]}`;
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–ø—á–∏
        function initCaptcha() {
            generateCaptcha();
            
            document.getElementById('refreshCaptcha').addEventListener('click', generateCaptcha);
            document.getElementById('audioCaptcha').addEventListener('click', speakCaptcha);
            document.getElementById('captchaInput').addEventListener('input', validateCaptchaInput);
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–ø—á–∏
        function generateCaptcha() {
            const characters = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let result = '';
            for (let i = 0; i < CONFIG.captchaLength; i++) {
                result += characters.charAt(Math.floor(Math.random() * characters.length));
            }
            
            state.captchaCode = result;
            document.getElementById('captchaCode').textContent = result;
            document.getElementById('captchaInput').value = '';
            document.getElementById('captchaError').textContent = '';
            document.getElementById('captchaInput').classList.remove('shake');
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É
            state.captchaVerified = false;
            updateStartButton();
        }
        
        // –û–∑–≤—É—á–∏–≤–∞–Ω–∏–µ –∫–∞–ø—á–∏
        function speakCaptcha() {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(state.captchaCode.split('').join(' '));
                utterance.lang = state.currentLanguage === 'ru' ? 'ru-RU' : 'en-US';
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            } else {
                showCaptchaError(state.currentLanguage === 'ru' ? 
                    '–û–∑–≤—É—á–∏–≤–∞–Ω–∏–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–∞—à–∏–º –±—Ä–∞—É–∑–µ—Ä–æ–º' : 
                    'Audio playback is not supported by your browser');
            }
        }
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞ –∫–∞–ø—á–∏
        function validateCaptchaInput() {
            const input = document.getElementById('captchaInput');
            const errorElement = document.getElementById('captchaError');
            
            // –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã –∏ –ø—Ä–∏–≤–æ–¥–∏–º –∫ –≤–µ—Ä—Ö–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É
            input.value = input.value.replace(/\s/g, '').toUpperCase();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
            if (input.value === state.captchaCode) {
                state.captchaVerified = true;
                errorElement.textContent = '';
                errorElement.style.color = '#10b981';
                errorElement.textContent = state.currentLanguage === 'ru' ? 
                    '‚úì –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞' : '‚úì Verification passed';
            } else if (input.value.length === CONFIG.captchaLength) {
                state.captchaVerified = false;
                errorElement.style.color = '#ef4444';
                errorElement.textContent = state.currentLanguage === 'ru' ? 
                    '–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥' : 'Invalid code';
                input.classList.add('shake');
                setTimeout(() => input.classList.remove('shake'), 300);
            } else {
                state.captchaVerified = false;
                errorElement.textContent = '';
            }
            
            updateStartButton();
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É –∫–∞–ø—á–∏
        function showCaptchaError(message) {
            const errorElement = document.getElementById('captchaError');
            errorElement.style.color = '#ef4444';
            errorElement.textContent = message;
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ–∫–±–æ–∫—Å–∞ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è
        function initAgreementCheckbox() {
            const checkbox = document.getElementById('agreeCheckbox');
            checkbox.addEventListener('change', function() {
                state.agreementAccepted = checkbox.checked;
                updateStartButton();
            });
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ –Ω–∞—á–∞–ª–∞
        function initStartButton() {
            const startButton = document.getElementById('startButton');
            startButton.addEventListener('click', function() {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ —É—Å–ª–æ–≤–∏—è
                if (!state.agreementAccepted) {
                    alert(state.currentLanguage === 'ru' ? 
                        '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–∏–º–∏—Ç–µ —É—Å–ª–æ–≤–∏—è —Å–æ–≥–ª–∞—à–µ–Ω–∏—è' : 
                        'Please accept the agreement terms');
                    return;
                }
                
                if (!state.captchaVerified) {
                    alert(state.currentLanguage === 'ru' ? 
                        '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–¥ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∏' : 
                        'Please enter the captcha code correctly');
                    return;
                }
                
                // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
                window.location.href = 'main.html';
            });
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –Ω–∞—á–∞–ª–∞
        function updateStartButton() {
            const startButton = document.getElementById('startButton');
            startButton.disabled = !(state.agreementAccepted && state.captchaVerified);
        }
        
        // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –¥–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
        if (/Mobi|Android/i.test(navigator.userAgent)) {
            const warningsList = document.querySelector('.warnings-list');
            const mobileWarning = document.createElement('div');
            mobileWarning.className = 'warning-item';
            mobileWarning.innerHTML = `
                <div class="warning-number">!</div>
                <div class="warning-text">
                    <strong data-lang="ru">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é.</strong>
                    <span data-lang="ru">–ù–µ –æ—Ç–≤–ª–µ–∫–∞–π—Ç–µ—Å—å –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω –≤–æ –≤—Ä–µ–º—è –¥–≤–∏–∂–µ–Ω–∏—è.</span>
                    <strong data-lang="en" style="display: none;">Use the app on mobile devices with caution.</strong>
                    <span data-lang="en" style="display: none;">Do not be distracted by the phone while moving.</span>
                </div>
            `;
            warningsList.appendChild(mobileWarning);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
            updateLanguageDisplay();
        }
    </script>
</body>
</html>
